{% extends "layout.html" %}
{% block body %}
<a href={{url_for('logout')}}>Logout</a>
<div class="row text-center">
{% if name %}
    <h1>Hello {{name}}!</h1>
{% else %}
	<h1>Hello Anonymous! You shouldn't be here. Sucka!</h1>
</div>
{% endif %}
<div class="row">
    <div class="col-sm-4">
        <div class="row">
            <h3>Updates</h3>
        </div>
        <div id="update_pane" class="row"></div>
    </div>
    <div class="col-sm-4">
        <div class="row">
            <h3>Actions</h3>
        </div>
        <div id="actions_pane" class="row"></div>
    </div>
    <div class="col-sm-4">
        <div class="row">
            <h3>Community</h3>
        </div>
        <div id="community_pane" class="row"></div>
    </div>

</div>
{% endblock %}
{% block scripts %}
<script type='text/javascript'>
function init(){
    fetchItems('update_pane', "user_updates");
    fetchItems('actions_pane', "user_action_items");
    fetchItems('community_pane', "community_updates");
}
function fetchItems(id, item_type){
    $.ajax({
        url: '/fetchitems',
        type: 'POST',
        data: {pane_id: id, item_type: item_type},
        success: function (result){
            $('#' + id).html(result);
        }
    })
}

function deleteItem(pane, id){
    $.ajax({
        url: '/deleteitem',
        type: 'POST',
        data: {pane_id: pane.id, item_id: id},
        success: function (result){
            $('#' + pane.id).html(result);
        }
    })    
}

</script>
{% endblock %}
